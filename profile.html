  <main>
    <section class="profile-section">
      <h2>Update Your Profile Picture</h2>
      <div class="profile-pic-wrapper">
        <img id="profile-pic" src="default-avatar.png" alt="Profile Picture" />
        <input type="file" id="file-input" accept="image/*" />
        <button id="upload-btn">Upload Picture</button>
      </div>
    </section>

    <h1 id="username" class="profile-username" tabindex="0">Loading...</h1>
    <p id="bio" class="profile-bio" tabindex="0">Loading your bio...</p>

    <section class="profile-stats" aria-label="User statistics">
      <div>
        <strong tabindex="0">124</strong><span>Posts</span>
      </div>
      <div>
        <strong tabindex="0">3.5K</strong><span>Followers</span>
      </div>
      <div>
        <strong tabindex="0">250</strong><span>Following</span>
      </div>
    </section>

    <a href="settings.html" class="btn-edit-profile" role="button" tabindex="0">Edit Profile</a>

    <section class="profile-posts" aria-label="User posts">
      <!-- You can later fetch real posts from Supabase -->
      <article class="profile-post" tabindex="0">
        <h3>Mindfulness and Me</h3>
        <p>Just finished a great meditation session.</p>
      </article>
    </section>
  </main>

  <footer role="contentinfo">
    <p>&copy; 2025 Speak Louder, Love Harder |
      <a href="https://linktr.ee/rissa.star" target="_blank" rel="noopener noreferrer">More Links</a>
    </p>
  </footer>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    const supabase = createClient(
      "https://ytgrzhtntwzefwjmhgjj.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    );

    async function loadProfile() {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) return;

      const { data, error } = await supabase
        .from("profiles")
        .select("username, bio, avatar_url")
        .eq("id", user.id)
        .single();

      if (data) {
        document.getElementById("username").textContent = data.username || "No username";
        document.getElementById("bio").textContent = data.bio || "Tell us about yourself.";
        document.getElementById("profile-pic").src = data.avatar_url || "default-avatar.png";
      }
    }

    // Load profile once
    loadProfile();

    // Realtime updates
    supabase
      .channel("realtime:profiles")
      .on(
        "postgres_changes",
        { event: "*", schema: "public", table: "profiles" },
        (payload) => loadProfile()
      )
      .subscribe();
  </script>
</body>
</html>