<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1 class="glow">Your Dashboard</h1>
    <div class="user-menu">
      <span id="user-display"></span>
      <button id="logout">Logout</button>
    </div>
  </header>
  <main>
    <h2>📝 Your Worksheets</h2>
    <form id="note-form">
      <input type="text" id="note-title" placeholder="Worksheet Title" required />
      <textarea id="note-body" rows="5" placeholder="Write something..."></textarea>
      <button type="submit">💾 Save Worksheet</button>
    </form>
    <div id="saved-notes"></div>
  </main>
  <footer><p><a href="index.html">Home</a></p></footer>
  <script src="auth.js"></script>
  <script>
    const user = localStorage.getItem("currentUser");
    if (!user) location.href = "auth.html";
    else document.getElementById("user-display").textContent = "👤 " + user;

    const noteForm = document.getElementById("note-form");
    const savedDiv = document.getElementById("saved-notes");
    const logoutBtn = document.getElementById("logout");

    const saveNote = (title, body) => {
      let notes = JSON.parse(localStorage.getItem("notes-" + user) || "[]");
      notes.push({ title, body, time: new Date().toLocaleString() });
      localStorage.setItem("notes-" + user, JSON.stringify(notes));
      loadNotes();
    };

    const loadNotes = () => {
      const notes = JSON.parse(localStorage.getItem("notes-" + user) || "[]");
      savedDiv.innerHTML = "";
      notes.forEach((n, i) => {
        const card = document.createElement("div");
        card.className = "note-card";
        card.innerHTML = `<h3>${n.title}</h3><p>${n.body}</p><small>${n.time}</small>`;
        savedDiv.appendChild(card);
      });
    };

    noteForm.onsubmit = (e) => {
      e.preventDefault();
      const title = document.getElementById("note-title").value;
      const body = document.getElementById("note-body").value;
      saveNote(title, body);
      noteForm.reset();
    };

    logoutBtn.onclick = () => {
      localStorage.removeItem("currentUser");
      location.href = "auth.html";
    };

    loadNotes();
  </script>
</body>
</html>